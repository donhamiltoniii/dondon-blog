---
import ArticleAssetLayout from "../../layouts/ArticleAssetLayout.astro";
import type { CodeAsset } from "../../types";
import { getAllCodeAssets } from "../../utils/get-code-assets";

export async function getStaticPaths() {
  const codeAssets = await getAllCodeAssets();
  return codeAssets.map((ca: { slug: any }) => ({
    params: { slug: ca.slug },
    props: ca,
  }));
}

type Props = CodeAsset;

const codeAsset = Astro.props;
const { Content, remarkPluginFrontmatter } = await codeAsset.render();

codeAsset.data = {
  ...codeAsset.data,
  lastUpdate: new Date(remarkPluginFrontmatter.lastUpdate),
};
---

<ArticleAssetLayout {...codeAsset.data}>
  <Content />
</ArticleAssetLayout>
