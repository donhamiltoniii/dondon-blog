---
import Layout from "../../../layouts/SeedLayout.astro";
import { getSeeds, type Seed } from "../../../utils/get-seeds";

export async function getStaticPaths() {
  const seeds = await getSeeds();
  return seeds.map((seed: Seed) => {
    const slugArr = seed.slug.split("/");
    const paraSection = slugArr.unshift();
    const slug = slugArr.join("/");

    return {
      params: { paraSection, slug },
      props: { seed },
    };
  });
}

type Props = { seed: Seed };

const { seed } = Astro.props;
const { Content } = await seed.render();
---

<Layout {...seed.data}>
  <Content />
</Layout>
